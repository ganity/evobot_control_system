# EvoBot控制系统 Windows打包说明

## 环境准备

1. **Python环境**：确保安装了Python 3.10+
2. **依赖安装**：
   ```bash
   # 安装项目依赖
   uv sync
   
   # 安装打包依赖
   pip install -r build_requirements.txt
   ```

## 打包步骤

### 方式一：自动打包（推荐）

1. 双击运行 `build_windows.bat`
2. 等待打包完成
3. 在 `dist/EvoBot控制系统/` 目录找到可执行文件

### 方式二：单文件打包

1. 双击运行 `build_onefile.bat`  
2. 等待打包完成
3. 在 `dist/` 目录找到 `EvoBot控制系统.exe`

### 方式三：手动打包

```bash
# 使用spec文件打包
pyinstaller evobot.spec --clean --noconfirm

# 或直接命令行打包
pyinstaller --windowed --name "EvoBot控制系统" main.py
```

## 打包优化

### 减小体积
```bash
python optimize_build.py
```

### 创建安装程序
使用Inno Setup编译 `installer.iss` 文件

## 常见问题

### 1. 缺少模块错误
在 `evobot.spec` 的 `hiddenimports` 中添加缺少的模块

### 2. 配置文件找不到
确保配置文件在 `datas` 中正确指定路径

### 3. 启动慢
- 使用目录打包而非单文件打包
- 排除不必要的模块

### 4. 运行时错误
检查 `startup_optimizer.py` 中的路径设置

## 分发建议

1. **目录打包**：适合内部使用，启动快
2. **单文件打包**：适合外部分发，文件少
3. **安装程序**：适合正式发布，用户体验好

## 测试清单

- [ ] 程序能正常启动
- [ ] 界面显示正常
- [ ] 配置文件加载正常
- [ ] 串口通信功能正常
- [ ] 所有面板功能正常
- [ ] 录制回放功能正常
- [ ] 运动学计算正常